<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Surat Bebas Asrama</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="lg:ml-52 bg-gray-50">
    <div class="bg-white rounded-lg shadow-sm border">
        <div class="px-6 py-4 border-b">
            <div class="flex items-center justify-between">
                <h2 class="text-lg font-semibold text-gray-800">Daftar Pengajuan Surat Bebas Asrama</h2>
                <button class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors">
                    <i class="fas fa-plus mr-2"></i>Buat Pengajuan Baru
                </button>
            </div>
        </div>
        
        <div class="overflow-x-auto">
            <table class="w-full">
                <thead class="bg-gray-50">
                    <tr>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                            Nomor Pengajuan
                        </th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                            Tanggal Pengajuan
                        </th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                            Pembayaran
                        </th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                            Status Pengajuan
                        </th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                            Aksi
                        </th>
                        
                    </tr>
                </thead>
                <tbody class="bg-white divide-y divide-gray-200">
                    <!-- Row 1: Menunggu Pembayaran (Belum upload bukti) -->
                    <tr class="hover:bg-gray-50" data-status="menunggu_pembayaran" data-bukti-uploaded="false">
                        <td class="px-6 py-4 whitespace-nowrap">
                            <div class="text-sm font-medium text-gray-900">001</div>
                        </td>

                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-600">
                            15 September 2025
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-600">
                            Rp 50.000
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-amber-100 text-amber-800">
                                <i class="fas fa-clock mr-1"></i>
                                Menunggu Pembayaran
                            </span>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <div class="flex space-x-2">
                                <button class="bg-green-600 hover:bg-green-700 text-white px-3 py-1 rounded text-xs font-medium transition-colors">
                                    <i class="fas fa-credit-card mr-1"></i>Bayar
                                </button>
                            </div>
                        </td>
                        
                    </tr>
                    
                    <!-- Row 2: Menunggu Pembayaran (Sudah upload bukti) -->
                    <tr class="hover:bg-gray-50" data-status="menunggu_pembayaran" data-bukti-uploaded="true">
                        <td class="px-6 py-4 whitespace-nowrap">
                            <div class="text-sm font-medium text-gray-900">002</div>
                        </td>
                        
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-600">
                            12 September 2025
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-600">
                            Rp 50.000
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-amber-100 text-amber-800">
                                <i class="fas fa-clock mr-1"></i>
                                Menunggu Pembayaran
                            </span>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <div class="flex space-x-2">
                                <button disabled class="bg-gray-300 text-gray-500 px-3 py-1 rounded text-xs font-medium cursor-not-allowed">
                                    <i class="fas fa-credit-card mr-1"></i>Bayar
                                </button>
                            </div>
                        </td>
                        
                    </tr>
                    
                    <!-- Row 3: Proses Verifikasi -->
                    <tr class="hover:bg-gray-50" data-status="proses_verifikasi" data-bukti-uploaded="true">
                        <td class="px-6 py-4 whitespace-nowrap">
                            <div class="text-sm font-medium text-gray-900">003</div>
                        </td>
                        
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-600">
                            8 September 2025
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-600">
                            -
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800">
                                <i class="fas fa-check-double mr-1"></i>
                                Proses Verifikasi
                            </span>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <div class="flex space-x-2">
                                <button disabled class="bg-gray-300 text-gray-500 px-3 py-1 rounded text-xs font-medium cursor-not-allowed">
                                    <i class="fas fa-credit-card mr-1"></i>Bayar
                                </button>
                            </div>
                        </td>
                        
                    </tr>
                    
                    <!-- Row 4: Lunas -->
                    <tr class="hover:bg-gray-50" data-status="lunas" data-bukti-uploaded="true">
                        <td class="px-6 py-4 whitespace-nowrap">
                            <div class="text-sm font-medium text-gray-900">004</div>
                        </td>
                        
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-600">
                            5 September 2025
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-600">
                            -
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800">
                                <i class="fas fa-check mr-1"></i>
                                Lunas
                            </span>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <div class="flex space-x-2">
                                <button class="bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-xs font-medium transition-colors">
                                    <i class="fas fa-download mr-1"></i>Unduh Surat
                                </button>
                            </div>
                        </td>
                        
                    </tr>
                </tbody>
            </table>
        </div>
        
        <!-- Empty State (uncomment if needed) -->
        <!-- <div class="text-center py-12">
            <i class="fas fa-file-alt text-gray-400 text-4xl mb-4"></i>
            <h3 class="text-lg font-medium text-gray-900 mb-2">Belum ada pengajuan</h3>
            <p class="text-gray-500 mb-4">Anda belum memiliki pengajuan surat bebas asrama.</p>
            <button class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors">
                <i class="fas fa-plus mr-2"></i>Buat Pengajuan Pertama
            </button>
        </div> -->
    </div>

    <script>
         document.addEventListener('DOMContentLoaded', function() {
        // Handle button clicks
        const buttons = document.querySelectorAll('button:not([disabled])');
        buttons.forEach(button => {
            button.addEventListener('click', function() {
                const buttonText = this.textContent.trim();
                
                if (buttonText.includes('Bayar')) {
                    window.location.href = '/mahasiswa/pembayaran';
                } else if (buttonText.includes('Unduh Surat')) {
                    alert('Mengunduh surat bebas asrama...');
                    setTimeout(() => {
                        alert('Surat berhasil diunduh!');
                    }, 500);
                } else if (buttonText.includes('Buat Pengajuan')) {
                    alert('Mengarahkan ke form pengajuan baru...');
                }
            });
        });

            // Add hover effects for table rows
            const tableRows = document.querySelectorAll('tbody tr');
            tableRows.forEach(row => {
                row.addEventListener('mouseenter', function() {
                    if (!this.classList.contains('bg-blue-50')) {
                        this.style.backgroundColor = '#f8fafc';
                    }
                });
                row.addEventListener('mouseleave', function() {
                    this.style.backgroundColor = '';
                });
            });

            // Function to simulate status changes (for demo purposes)
            function simulateStatusChange(rowElement, newStatus, buktiUploaded = false) {
                const statusCell = rowElement.querySelector('td:nth-child(2) span');
                const paymentCell = rowElement.querySelector('td:nth-child(4)');
                const actionCell = rowElement.querySelector('td:nth-child(5)');
                const keteranganCell = rowElement.querySelector('td:nth-child(6)');
                
                // Update data attributes
                rowElement.setAttribute('data-status', newStatus);
                rowElement.setAttribute('data-bukti-uploaded', buktiUploaded);
                
                // Update based on status
                updateRowDisplay(rowElement, newStatus, buktiUploaded);
            }

            function updateRowDisplay(rowElement, status, buktiUploaded) {
                const statusCell = rowElement.querySelector('td:nth-child(2) span');
                const paymentCell = rowElement.querySelector('td:nth-child(4)');
                const actionCell = rowElement.querySelector('td:nth-child(5) div');
                const keteranganCell = rowElement.querySelector('td:nth-child(6)');
                
                // Clear existing content
                actionCell.innerHTML = '';
                
                switch(status) {
                    case 'menunggu_pembayaran':
                        if (buktiUploaded) {
                            // Sudah upload bukti pembayaran
                            actionCell.innerHTML = `
                                <button disabled class="bg-gray-300 text-gray-500 px-3 py-1 rounded text-xs font-medium cursor-not-allowed">
                                    <i class="fas fa-credit-card mr-1"></i>Bayar
                                </button>
                            `;
                            keteranganCell.innerHTML = `
                                <span class="text-sm text-amber-600">
                                    <i class="fas fa-hourglass-half mr-1"></i>
                                    Harap menunggu, admin sedang melakukan verifikasi pembayaran
                                </span>
                            `;
                        } else {
                            // Belum upload bukti pembayaran
                            actionCell.innerHTML = `
                                <button class="bg-green-600 hover:bg-green-700 text-white px-3 py-1 rounded text-xs font-medium transition-colors">
                                    <i class="fas fa-credit-card mr-1"></i>Bayar
                                </button>
                            `;
                            keteranganCell.innerHTML = `<span class="text-sm text-gray-600">-</span>`;
                        }
                        break;
                        
                    case 'proses_verifikasi':
                        actionCell.innerHTML = `
                            <button disabled class="bg-gray-300 text-gray-500 px-3 py-1 rounded text-xs font-medium cursor-not-allowed">
                                <i class="fas fa-credit-card mr-1"></i>Bayar
                            </button>
                        `;
                        paymentCell.innerHTML = `
                            <span class="text-sm text-blue-600 font-medium">
                                <i class="fas fa-clock mr-1"></i>Verifikasi
                            </span>
                        `;
                        keteranganCell.innerHTML = `
                            <span class="text-sm text-blue-600">
                                <i class="fas fa-search mr-1"></i>
                                Pembayaran sedang diverifikasi oleh admin
                            </span>
                        `;
                        break;
                        
                    case 'lunas':
                        actionCell.innerHTML = `
                            <button class="bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-xs font-medium transition-colors">
                                <i class="fas fa-download mr-1"></i>Unduh Surat
                            </button>
                        `;
                        paymentCell.innerHTML = `
                            <span class="text-sm text-green-600 font-medium">
                                <i class="fas fa-check-circle mr-1"></i>Lunas
                            </span>
                        `;
                        keteranganCell.innerHTML = `
                            <span class="text-sm text-green-600">
                                <i class="fas fa-check-circle mr-1"></i>
                                Surat bebas asrama telah tersedia untuk diunduh
                            </span>
                        `;
                        break;
                }
                
                // Re-attach event listeners to new buttons
                const newButtons = actionCell.querySelectorAll('button:not([disabled])');
                newButtons.forEach(button => {
                    button.addEventListener('click', function() {
                        const buttonText = this.textContent.trim();
                        
                        if (buttonText.includes('Bayar')) {
                            if (confirm('Apakah Anda yakin ingin melanjutkan ke halaman pembayaran?')) {
                                alert('Mengarahkan ke halaman pembayaran...');
                            }
                        } else if (buttonText.includes('Unduh Surat')) {
                            alert('Mengunduh surat bebas asrama...');
                            setTimeout(() => {
                                alert('Surat berhasil diunduh!');
                            }, 500);
                        }
                    });
                });
            }
        });
    </script>
</body>
</html>