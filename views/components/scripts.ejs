<script>
    // Sidebar functionality
    const sidebar = document.getElementById('sidebar');
    const mainContent = document.getElementById('main-content');
    const sidebarToggle = document.getElementById('sidebar-toggle');
    const collapseBtn = document.getElementById('collapse-btn');
    const mobileOverlay = document.getElementById('mobile-overlay');
    const sidebarTexts = document.querySelectorAll('.sidebar-text');
    const logoText = document.getElementById('logo-text');
    
    let isCollapsed = localStorage.getItem('sidebarCollapsed') === 'true';
    let isMobileOpen = false;

    // Initialize collapsed state
    if (isCollapsed && window.innerWidth >= 1024) {
        toggleCollapse(true);
    }

    // Mobile toggle
    sidebarToggle?.addEventListener('click', () => {
        isMobileOpen = !isMobileOpen;
        
        if (isMobileOpen) {
            sidebar.classList.remove('-translate-x-full');
            mobileOverlay.classList.remove('hidden');
            document.body.classList.add('overflow-hidden');
        } else {
            sidebar.classList.add('-translate-x-full');
            mobileOverlay.classList.add('hidden');
            document.body.classList.remove('overflow-hidden');
        }
    });

    // Mobile overlay click
    mobileOverlay?.addEventListener('click', () => {
        isMobileOpen = false;
        sidebar.classList.add('-translate-x-full');
        mobileOverlay.classList.add('hidden');
        document.body.classList.remove('overflow-hidden');
    });

    // Desktop collapse
    collapseBtn?.addEventListener('click', () => {
        isCollapsed = !isCollapsed;
        localStorage.setItem('sidebarCollapsed', isCollapsed);
        toggleCollapse(isCollapsed);
    });

    function toggleCollapse(collapse) {
        if (collapse) {
            sidebar.classList.add('w-16');
            sidebar.classList.remove('w-64');
            mainContent.classList.add('lg:ml-16');
            mainContent.classList.remove('lg:ml-64');
            
            sidebarTexts.forEach(text => {
                text.classList.add('hidden');
            });
            logoText.textContent = '';
            
            // Hide chevron icons
            document.querySelectorAll('.fa-chevron-right').forEach(icon => {
                icon.classList.add('hidden');
            });
        } else {
            sidebar.classList.remove('w-16');
            sidebar.classList.add('w-64');
            mainContent.classList.remove('lg:ml-16');
            mainContent.classList.add('lg:ml-64');
            
            sidebarTexts.forEach(text => {
                text.classList.remove('hidden');
            });
            logoText.textContent = 'MYASRAMA';
            
            // Show chevron icons
            document.querySelectorAll('.fa-chevron-right').forEach(icon => {
                icon.classList.remove('hidden');
            });
        }
    }

    // Profile dropdown
    const profileDropdown = document.getElementById('profile-dropdown');
    const dropdownMenu = document.getElementById('dropdown-menu');
    
    profileDropdown?.addEventListener('click', (e) => {
        e.stopPropagation();
        dropdownMenu.classList.toggle('hidden');
    });

    // Close dropdown when clicking outside
    document.addEventListener('click', () => {
        dropdownMenu?.classList.add('hidden');
    });

    // Initialize mobile sidebar as hidden
    if (window.innerWidth < 1024) {
        sidebar.classList.add('-translate-x-full');
    }

    // Handle window resize
    window.addEventListener('resize', () => {
        if (window.innerWidth >= 1024) {
            sidebar.classList.remove('-translate-x-full');
            mobileOverlay.classList.add('hidden');
            document.body.classList.remove('overflow-hidden');
            isMobileOpen = false;
            
            // Restore collapse state
            if (isCollapsed) {
                toggleCollapse(true);
            }
        } else if (!isMobileOpen) {
            sidebar.classList.add('-translate-x-full');
        }
    });

    // Smooth scroll for navigation
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({
                    behavior: 'smooth'
                });
            }
        });
    });
</script>